# Техническое задание: Telegram-бот "Шахматбот"

## 1. Основные игровые режимы
### 🤖 Локальный матч с ботом
- Разные уровни сложности ИИ (от новичка до эксперта)
- Stockfish

### 👥 Локальный матч с человеком (на одном устройстве)
- Пошаговая передача устройства между игроками
- Поддержка мультиаккаунта (если несколько пользователей в одном чате)

### 🌐 Онлайн-матч (через систему комнат)
- Создание/подключение к комнате по коду
- Покидание комнаты
- Расформирование комнаты
- Хост может выгнать

## 2. Шахматные вариации
### ♟️ Standard (Классические шахматы)
- Полная поддержка FIDE-правил
- Автоматическое определение пата/мата/ничьи
- История всех классических дебютов (испанская партия, ферзевый гамбит и др.)

### 🎲 Chess960 (Фишера)
- 960 уникальных стартовых позиций
- Генерация позиции по seed-числу (для повтора игры)
- Проверка рокировки по правилам Фишера:
  - Король и ладья должны быть на начальных клетках
  - Все промежуточные клетки свободны

### 🧟 Horde (Орда)
- Белые: 32 пешки (полная 2-я и 3-я горизонталь)
- Чёрные: стандартный набор фигур
- Условия победы:
  - Белые: поставить мат как в классике
  - Чёрные: уничтожить все белые пешки

### ✅ Three-check (Три шаха)
- Альтернативная цель: объявить шах 3 раза

## 3. Управление ходами
### ♟️ Удобный ввод ходов
- Через **inline-кнопки** (выбор фигуры → клетка)
- Текстовый ввод (например `e2e4`)
- Возможность предпросмотра доски перед ходом

### ⏳ Таймеры
- Шахматные часы (классика, блиц, пуля)
- Варианты с добавлением времени после хода

## 4. Визуализация и кастомизация
### 🖼️ Отправка доски картинкой
- Генерация изображения (ASCII или PNG через библиотеку `python-chess`)
- Возможность выбора стиля (шахматные наборы)

### 🎨 Кастомизация доски и фигур
- Цвета клеток (классика, темная тема, хаки)
- Стили фигур (стандартные, минимализм, пиксельные)

## 5. Работа с партиями
### 📜 История ходов
- Отображение в формате PGN
- Возможность отката к любому ходу (анализ)

### 📂 Импорт/экспорт партий
- Загрузка из **Lichess.org**
- Выгрузка в **PGN, JSON, TXT**
- Загрузка партий из файла для просмотра в боте

## 6. База данных и аналитика
### 🗃️ База данных партий
- Хранение истории игр (SQLite)
- Статистика: победы/поражения, любимые дебюты
- Большие базы данных **Lichess.org**, **Chess.com**

### 📊 Анализ партий
- Оценка ходов (через Stockfish API)
- Подсчёт ошибок и лучших моментов


## Технологии
- **Шахматный движок**: `python-chess` + `Stockfish` (анализ)
- **Бот**: `python-telegram-bot`
- **База данных**: SQLite
- **Конвертация .svg -> .png**: `svglib` + `reportlab` 
- **Интеграции**: `Lichess API`
